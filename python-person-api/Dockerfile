FROM python:3.9-alpine

EXPOSE 8000/tcp
ENV NEW_RELIC_CONFIG_FILE=newrelic.ini 

# requirements.txt must be generated by pipenv before building. See Makefile.
COPY requirements.txt /tmp
RUN pip install -r /tmp/requirements.txt
COPY . /app
WORKDIR /app
CMD newrelic-admin run-program uvicorn --host 0.0.0.0 person_api:app